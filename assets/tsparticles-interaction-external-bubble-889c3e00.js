import{j as e,k as i,O as t,c as o,E as b,l as s,n as l,m as n,o as a,p as r,q as c,s as u,t as d,C as v,R as p,u as h,i as f,f as y,h as m}from"./tsparticles-engine-1e3d91c8.js";class z{constructor(){this.distance=200,this.duration=.4,this.mix=!1}load(o){if(o){if(void 0!==o.distance&&(this.distance=o.distance),void 0!==o.duration&&(this.duration=o.duration),void 0!==o.mix&&(this.mix=o.mix),void 0!==o.opacity&&(this.opacity=o.opacity),void 0!==o.color){const b=e(this.color)?void 0:this.color;this.color=i(o.color,(e=>t.create(b,e)))}void 0!==o.size&&(this.size=o.size)}}}class O extends z{constructor(){super(),this.selectors=[]}get ids(){return i(this.selectors,(e=>e.replace("#","")))}set ids(e){this.selectors=i(e,(e=>`#${e}`))}load(e){super.load(e),e&&(void 0!==e.ids&&(this.ids=e.ids),void 0!==e.selectors&&(this.selectors=e.selectors))}}class g extends z{load(e){super.load(e),e&&(this.divs=i(e.divs,(e=>{const i=new O;return i.load(e),i})))}}function _(e,i,t,b){if(i>=t){return o(e+(i-t)*b,e,i)}if(i<t){return o(e-(t-i)*b,i,e)}}class x extends b{constructor(e){super(e),this._clickBubble=()=>{var e;const i=this.container,t=i.actualOptions,o=i.interactivity.mouse.clickPosition,b=t.interactivity.modes.bubble;if(!b||!o)return;i.bubble||(i.bubble={});const n=i.retina.bubbleModeDistance;if(!n||n<0)return;const a=i.particles.quadTree.queryCircle(o,n,(e=>this.isEnabled(e))),{bubble:r}=i;for(const c of a){if(!r.clicking)continue;c.bubble.inRange=!r.durationEnd;const t=c.getPosition(),a=s(t,o),u=((new Date).getTime()-(i.interactivity.mouse.clickTime||0))/1e3;u>b.duration&&(r.durationEnd=!0),u>2*b.duration&&(r.clicking=!1,r.durationEnd=!1);const d={bubbleObj:{optValue:i.retina.bubbleModeSize,value:c.bubble.radius},particlesObj:{optValue:l(c.options.size.value)*i.retina.pixelRatio,value:c.size.value},type:"size"};this._process(c,a,u,d);const v={bubbleObj:{optValue:b.opacity,value:c.bubble.opacity},particlesObj:{optValue:l(c.options.opacity.value),value:(null==(e=c.opacity)?void 0:e.value)??1},type:"opacity"};this._process(c,a,u,v),!r.durationEnd&&a<=n?this._hoverBubbleColor(c,a):delete c.bubble.color}},this._hoverBubble=()=>{const e=this.container,i=e.interactivity.mouse.position,t=e.retina.bubbleModeDistance;if(!t||t<0||void 0===i)return;const o=e.particles.quadTree.queryCircle(i,t,(e=>this.isEnabled(e)));for(const b of o){b.bubble.inRange=!0;const o=b.getPosition(),l=s(o,i),r=1-l/t;l<=t?r>=0&&e.interactivity.status===n&&(this._hoverBubbleSize(b,r),this._hoverBubbleOpacity(b,r),this._hoverBubbleColor(b,r)):this.reset(b),e.interactivity.status===a&&this.reset(b)}},this._hoverBubbleColor=(e,i,t)=>{const o=this.container.actualOptions,b=t??o.interactivity.modes.bubble;if(b){if(!e.bubble.finalColor){const i=b.color;if(!i)return;const t=r(i);e.bubble.finalColor=c(t)}if(e.bubble.finalColor)if(b.mix){e.bubble.color=void 0;const t=e.getFillColor();e.bubble.color=t?u(d(t,e.bubble.finalColor,1-i,i)):e.bubble.finalColor}else e.bubble.color=e.bubble.finalColor}},this._hoverBubbleOpacity=(e,i,t)=>{var o,b;const s=this.container.actualOptions,n=(null==t?void 0:t.opacity)??(null==(o=s.interactivity.modes.bubble)?void 0:o.opacity);if(!n)return;const a=e.options.opacity.value,r=_((null==(b=e.opacity)?void 0:b.value)??1,n,l(a),i);void 0!==r&&(e.bubble.opacity=r)},this._hoverBubbleSize=(e,i,t)=>{const o=this.container,b=(null==t?void 0:t.size)?t.size*o.retina.pixelRatio:o.retina.bubbleModeSize;if(void 0===b)return;const s=l(e.options.size.value)*o.retina.pixelRatio,n=_(e.size.value,b,s,i);void 0!==n&&(e.bubble.radius=n)},this._process=(e,i,t,o)=>{const b=this.container,s=o.bubbleObj.optValue,l=b.actualOptions.interactivity.modes.bubble;if(!l||void 0===s)return;const n=l.duration,a=b.retina.bubbleModeDistance,r=o.particlesObj.optValue,c=o.bubbleObj.value,u=o.particlesObj.value||0,d=o.type;if(a&&!(a<0)&&s!==r)if(b.bubble||(b.bubble={}),b.bubble.durationEnd)c&&("size"===d&&delete e.bubble.radius,"opacity"===d&&delete e.bubble.opacity);else if(i<=a){if((c??u)!==s){const i=u-t*(u-s)/n;"size"===d&&(e.bubble.radius=i),"opacity"===d&&(e.bubble.opacity=i)}}else"size"===d&&delete e.bubble.radius,"opacity"===d&&delete e.bubble.opacity},this._singleSelectorHover=(e,i,t)=>{const o=this.container,b=document.querySelectorAll(i),s=o.actualOptions.interactivity.modes.bubble;s&&b.length&&b.forEach((i=>{const b=i,l=o.retina.pixelRatio,n={x:(b.offsetLeft+b.offsetWidth/2)*l,y:(b.offsetTop+b.offsetHeight/2)*l},a=b.offsetWidth/2*l,r="circle"===t.type?new v(n.x,n.y,a):new p(b.offsetLeft*l,b.offsetTop*l,b.offsetWidth*l,b.offsetHeight*l),c=o.particles.quadTree.query(r,(e=>this.isEnabled(e)));for(const t of c){if(!r.contains(t.getPosition()))continue;t.bubble.inRange=!0;const i=s.divs,o=h(i,b);t.bubble.div&&t.bubble.div===b||(this.clear(t,e,!0),t.bubble.div=b),this._hoverBubbleSize(t,1,o),this._hoverBubbleOpacity(t,1,o),this._hoverBubbleColor(t,1,o)}}))},e.bubble||(e.bubble={}),this.handleClickMode=i=>{"bubble"===i&&(e.bubble||(e.bubble={}),e.bubble.clicking=!0)}}clear(e,i,t){e.bubble.inRange&&!t||(delete e.bubble.div,delete e.bubble.opacity,delete e.bubble.radius,delete e.bubble.color)}init(){const e=this.container,i=e.actualOptions.interactivity.modes.bubble;i&&(e.retina.bubbleModeDistance=i.distance*e.retina.pixelRatio,void 0!==i.size&&(e.retina.bubbleModeSize=i.size*e.retina.pixelRatio))}async interact(e){const i=this.container.actualOptions.interactivity.events,t=i.onHover,o=i.onClick,b=t.enable,s=t.mode,l=o.enable,n=o.mode,a=i.onDiv;b&&f("bubble",s)?this._hoverBubble():l&&f("bubble",n)?this._clickBubble():y("bubble",a,((i,t)=>this._singleSelectorHover(e,i,t)))}isEnabled(e){const i=this.container,t=i.actualOptions,o=i.interactivity.mouse,b=((null==e?void 0:e.interactivity)??t.interactivity).events,{onClick:s,onDiv:l,onHover:n}=b,a=m("bubble",l);return!!(a||n.enable&&o.position||s.enable&&o.clickPosition)&&(f("bubble",n.mode)||f("bubble",s.mode)||a)}loadModeOptions(e,...i){e.bubble||(e.bubble=new g);for(const t of i)e.bubble.load(null==t?void 0:t.bubble)}reset(e){e.bubble.inRange=!1}}async function C(e,i=!0){await e.addInteractor("externalBubble",(e=>new x(e)),i)}export{C as l};
